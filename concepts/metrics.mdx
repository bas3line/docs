---
title: 'Metrics'
description: 'UltraBalancer metrics and observability'
icon: 'chart-line'
---

## Endpoints

```bash
# JSON metrics
curl http://localhost:8080/metrics

# Prometheus format
curl http://localhost:8080/prometheus
```

## Key Metrics

| Metric | Description |
|--------|-------------|
| `ultrabalancer_requests_total` | Total requests |
| `ultrabalancer_requests_failed` | Failed requests |
| `ultrabalancer_response_time_seconds` | Response time histogram |
| `ultrabalancer_backend_healthy` | Backend health (1=healthy, 0=unhealthy) |
| `ultrabalancer_backend_active_connections` | Active connections per backend |

## Prometheus Queries

```promql
# Requests per second
rate(ultrabalancer_requests_total[5m])

# Error rate
rate(ultrabalancer_requests_failed[5m]) / rate(ultrabalancer_requests_total[5m])

# p95 latency
histogram_quantile(0.95, rate(ultrabalancer_response_time_seconds_bucket[5m]))

# Healthy backends
sum(ultrabalancer_backend_healthy)
```

## JSON Response

```json
{
  "total_requests": 1547823,
  "successful_requests": 1542891,
  "failed_requests": 4932,
  "avg_response_time_ms": 12.45,
  "p50_response_time_ms": 10.12,
  "p95_response_time_ms": 28.45,
  "p99_response_time_ms": 45.67,
  "requests_per_second": 17.91,
  "backends": [
    {
      "address": "192.168.1.10:8080",
      "healthy": true,
      "active_connections": 42,
      "total_requests": 515941
    }
  ]
}
```

## Related

- [Monitoring](/integration/monitoring) - Grafana setup
- [Admin API](/api-reference/admin) - Backend management